### 概述  
> 应用层的具体内容就是规定应用进程在通信时所遵循的协议  
> 应用进程的工作模式
>> 客户（Client）/服务器（Server）方式  
>> 描述的是进程之间服务与被服务的关系。客户是服务请求方，服务器是服务提供方  
>
### 域名系统DNS  
> 域名系统  
>> 是Internet上解决网上机器命名的一种系统。采用它来管理名字和IP的对应关系。（一对一、多对一）  
>
> 域名系统的实现  
>> 使用客户/服务器模式实现的分布式的数据库系统  
>
> 域名的形式   
>> 以若干个英文字母和数字组成，由“.”分隔成几部分，在Internet中，没有重复的域名  
>
> 因特网的域名结构  
>> 域名具有唯一性，是个逻辑概念  
>> 层次树状结构的命名方法  
>> ··· . 三级域名 . 二级域名 . 顶级域名  
>> 域名的结构由标号序列组成，各标号之间用`点`隔开  
>> 常用顶级域名：  
>>> 国家顶级域名nTLD：如：.cn表示中国，.us表示美国，.uk表示英国等等  
>>> 通用顶级域名gTLD：  
![image1](https://github.com/onshero/PCN/blob/picture/%E9%80%9A%E7%94%A8%E9%A1%B6%E7%BA%A7%E5%9F%9F%E5%90%8D.png)  
新增加了下列的通用顶级域名  
![image2](https://github.com/onshero/PCN/blob/picture/%E9%80%9A%E7%94%A8%E9%A1%B6%E7%BA%A7%E5%9F%9F%E5%90%8D2.png)  
>> 
>>我国的国家顶级域名：cn  
>> 由中国互联网信息中心CNNIC作为我国最大的顶级域基础设施网络运营机构，同时运营“.CN”、“.中国”、“.公司”、“.网络”顶级域  
>> 我国的二级域名分为两大类：  
>>> 类别域名：学术、教育机构：ac,edu；商业公司、团体：com；网络服务机构：net；政府机构：gov  
>>> 行政区域名：有34个，用于我国的省、自治区、直辖市。如bj、sh  
>>
>> ![image3](https://github.com/onshero/PCN/blob/picture/%E5%9B%A0%E7%89%B9%E7%BD%91%E7%9A%84%E5%9F%9F%E5%90%8D%E7%A9%BA%E9%97%B4.png)  
>
> 域名服务器——分布式的数据库系统  
>> 作用
>>> 每一个域名服务器不但能进行一些域名到IP地址的解析，而且具有连接向其他域名服务器的信息  
>>
>> 管辖范围  
>>> 一个服务器所管辖的（或有权限的）范围叫做区（区=域 | 区<域）  
>>
>> 四种类型  
>>> 根域名服务器  
>>>> `最重要`的域名服务器。所有的根域名服务器知道所有的顶级域名服务器的域名和IP地址  
>>>> 不管是哪一个本地域名服务器，若要对因特网上任何一个域名进行解析，只要自己无法解析，就首先求助于根域名服务器  
>>>> 在因特网上共有13个不同IP地址的根域名服务器，对应的域名为(a-m).rootservers.net    
>>>>> 1个主根在美国弗吉尼亚州，12个辅根中9个在美国，英国、瑞典、日本各1个  
>>>>
>>>> 根域名服务器和根域名镜像服务器有很多个。这样做的目的是为了方便用户，使世界上大部分DNS域名服务器都能就近找到一个根域名服务器  
>>>> 我国只引入四个根（F、I、J、L）镜像节点，位列19，不足美国1/10  
>>>
>>> 顶级域名服务器  
>>>> 负责管理顶级域名下注册的域名，如中国的CN域名服务器  
>>>
>>> 权限域名服务器  
>>>> 当一个权限域名服务器还不能给出最后的查询回答时，就会告诉发出查询请求的DNS客户，下一步应当找哪一个权限域名服务器  
>>>
>>> 本地域名服务器  
>>>> 也称为默认域名服务器，对域名系统非常重要  
>>>> 当一个主机发出DNS查询请求时，这个查询请求报文首先就发送给本地域名服务器，在本地就行查询，如果本地没有，才会向上级去进行请求，直接到根集去请求  
>>>
>>
>> 域名的解析过程  
>>> 主机向本地域名服务器的查询一般都是采用递归查询。如主机所询问的本地域名服务器不知道被查询域名的IP地址，那么本地域名服务器就以DNS客户的身份，向其他根域名服务器继续发出查询请求报文  
>>> 本地域名服务器向根域名服务器的查询通常是采用迭代查询。然后本地域名服务器进行后续的查询  
>>> ![image4](https://github.com/onshero/PCN/blob/picture/%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B.png)  
>>
>> DNS高速缓存  
>>> 每个域名服务器都维护一个高速缓存，存放最近使用过的名字以及从何处获得名字映射信息的记录  
>>> 为保持高速缓存中的内容正确，域名服务器应为每项内容设置计时器，并处理超过合理时间的项（例如，每个项目只存放两天）  
>>

### 动态主机配置协议DHCP  
> DHCP机制提供即插即用联网方式，允许一台计算机加入新的网络和获取IP地址而不用手工参与  
> 需要配置的项目：  
>> （1）IP地址  
>> （2）子网掩码  
>> （3）默认路由器的IP地址  
>> （4）域名服务器的IP地址  
>
> 基本原理：  
>> DHCP使用客户（默认68端口）/服务器（默认67端口）方式  
>> 客户端广播发送发现报文(DHCPDISCOVER)  
>> DHCP服务器发送提供报文(DHCPOFFER)  
>>> 先在其数据库中查找该计算机的配置信息。若找到，则返回找到的信息  
>>> 若找不到，则从服务器的IP地址池中取一个地址分配给该计算机  
>>
>
> DHCP中继代理（relay agent）  
>> 并不是每个网络上都有DHCP服务器，这样会使DHCP服务器的数量太多。现在是每一个网络至少有一个DHCP中继代理，它配置了DHCP服务器的IP地址信息  
>> 当DHCP中继代理收到主机发送的发现报文后，就以单播方式向DHCP服务器转发此报文，并等待其回答。  
收到DHCP服务器回答的提供报文后，DHCP中继代理再将此提供报文发回给主机  
>
> 租用期（lease period）  
>> DHCP服务器分配给DHCP客户的IP地址是临时的，因此DHCP客户只能在一段有限的时间内使用这个分配到的IP地址。DHCP协议称这段时间为租用期  
>> 租用期的数值应由DHCP服务器自己决定  
>> DHCP客户也可在自己发送的报文中（如发现报文）提出对租用期的要求  
>> 它并不是到最后时间才申请一个新的地址，为了保持连续性，会在中间设置两个时间点  
>
> DHCP协议的工作过程  
>> ![image5](https://github.com/onshero/PCN/blob/picture/DHCP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B.png)  
>> 1: DHCP服务器被动打开UDP端口67，等待客户端发来的报文  
>> 2：DHCP客户从UDP端口68发送DHCP发现报文  
>> 3：凡收到DHCP发现报文的DHCP服务器都发出DHCP提供报文，因此DHCP客户可能受到多个DHCP提供报文  
>> 4：DHCP客户从几个DHCP服务器中选择其中的一个，并向所选择的DHCP服务器发送DHCP请求报文  
>> 5：被选择的DHCP服务器发送确认报文DHCPACK，进入已绑定状态，并可开始使用得到的临时IP地址  
>> 6：DHCP客户发送请求报文DHCPREQUEST，向DHCP服务器请求新的IP地址  
>> 7：DHCP服务器若同意，则发回确认报文DHCPACK。DHCP客户得到了新的租用期，重新设置计时器  
>> 8：DHCP服务器若不同意，则发回否认报文DHCPACK。这时DHCP客户必须立即停止使用原来的IP地址，而必须重新申请IP地址（回到步骤2）  
>
### 电子邮件E-mail  
> 电子邮件（e-mail）是因特网上使用得最大的和最受用户欢迎的一种应用  
> 电子邮件的基本想法：  
>> 把邮件发送到收件人使用的邮件服务器，并放在其中的收件人的邮箱中，收件人可随时上网到自己的邮箱中进行读取  
>
> 电子邮件系统的组成构件：  
>> 客户端——用户代理  
>> 服务器端——邮件服务器  
>> 协议——SMTP、POP3、MIME等  
>> ![image6](https://github.com/onshero/PCN/blob/picture/%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%9A%84%E7%BB%84%E6%88%90%E6%9E%84%E4%BB%B6.png)  
>
> （1）用户代理UA（User Agent）  
>> 专门的电子邮件客户端软件：  
>>> 常用客户端软件：Outlook、Foxmail、···  
>>
>> 应具备功能：撰写、显示、处理和通信  
>
> （2）邮件服务器端  
>> 邮件服务器的功能是发送和接收邮件，同时还要向发信人报告邮件传送的情况（已交付、被拒绝、丢失等）。 
>> 邮件服务器按照客户/服务器方式工作。邮件服务器需要使用发送和读取两个不同的协议  
>
> （2）电子邮件协议  
>> 发送邮件的协议：SMTP   
>> 读取邮件的协议：POP3和IMAP  
>> 多用途Internet邮件扩展协议：MIME   
>
> 发送和接收的主要步骤  
>> ![image7](https://github.com/onshero/PCN/blob/picture/%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81%E5%92%8C%E6%8E%A5%E6%94%B6%E7%9A%84%E6%AD%A5%E9%AA%A4.png)  
>> 1.发件人调用用户代理撰写和编辑要发送的邮件  
>> 2.发件人的用户代理把邮件用SMTP协议发给发送方邮件服务器  
>> 3.STMP服务器把邮件临时存放在邮件缓存队列中，等待发送  
>> 4.发送方邮件服务器的SMTP客户与接收方邮件服务器的SMTP服务器建立TCP连接，然后就把邮件缓存队列中的邮件依次发送出去  
>> 5.运行在接收方邮件服务器中的SMTP服务器进程受到邮件后，把邮件放入到收件人的用户邮箱中，等待收件人进行读取  
>> 6.收件人在打算收信时，就运行PC机中的用户代理，使用POP3（或IMAP）协议读取发送给自己的邮件  
>
> 电子邮件的组成  
>> 电子邮件由信封和内容两部分组成   
>> 在邮件的信封上，最重要的就是收件人的地址  
>> 在邮件内容里，最主要的是To和Subject。  
>
> 电子邮件地址的格式  
>> TCP/IP体系的电子邮件系统规定电子邮件地址的格式：收件人邮箱名@邮箱所在主机的域名  
>> 邮箱所在的主机的域名在全世界是唯一的，而用户名在该域名的范围内是唯一的  
>
> 邮件内容的首部  
>> "To:"后面填入一个或多个收件人的电子邮件地址  
>> "Subject:"是邮件的主题。它反映了邮件的主要内容，便于用户查找邮件  
>> "From"和"Date"表示发信人的电子邮件地址和发信日期  
>> "Reply-To"是对方回信所用的地址  
>
> 简单邮件传送协议SMTP  
>> SMTP所规定的就是两个相互通信的SMTP进程之间应如何交换信息  
>> SMTP使用客户服务器方式。（端口25）  
>> SMTP规定了14条命令和21种应答信息  
>
> 邮件读取协议POP3  
>> 邮局协议POP是一个非常简单、但功能有限的邮件读取协议  
>
>
> 邮件读取协议IMAP（Internet Mail Access Protocol）  
>> 即交互式邮件存取协议，跟POP3类似邮件访问标准协议之一，不同之处在于开启该协议后，在客户端收取邮件，仍可以保留服务器端上的信息，且其在客户端上的所有操作都会反馈到服务器端上    
>
> **注意**
>> 发信人的用户代理向源邮件服务器发送邮件，以及源邮件服务器向目的邮件服务器发送邮件，都是使用SMTP协议  
>> 而POP协议或IMAP协议则是用户从目的邮件服务器上读取邮件所使用的协议  
>
> 基于万维网的电子邮件  
>> 两个邮件服务器之间的传送使用SMTP  
>> 电子邮件从发送端的客户端发送到服务器是使用HTTP协议  
>> 邮件从接收端的服务器传送到客户端是使用HTTP协议  
>
> 多用途因特网邮件扩充MIME  
>> SMTP特点：  
>>> 不能传送可执行文件或其他的二进制对象  
>>> SMTP限于传送7位的ASCII码  
>>> SMTP服务器会拒绝超过一定长度的邮件  
>>
>> MIME特点：  
>>> MIME并没有改动SMTP或取代它  
>>> MIME的意图是继续使用目前的格式，但增加了邮件主体的结构，并定义了传送肥ASCII码的编码规则  
>>> MIME现被扩展为互联网媒体类型  
>>> 是设定某种扩展名的文件用一种应用程序来打开的方式类型，当该扩展名文件被访问时，浏览器会自动使用指定应用程序来打开。多用于指定一些客户端自定义的文件名，以及一些媒体文件打开方式  
>> 
>> 支持：  
>>> 非ASCII字符文本  
>>> 非文本格式附件（二进制、声音、图像等）  
>>> 由多部分组成的消息体  
>>> 包含非ASCII字符的头信息  
>>
>
### 万维网 WWW（World Wide Web）  
> 万维网并非某种特殊的计算机网络。是一个大规模的、联网式的信息储藏所  
> 万维网用`非线性链接`的方法能非常方便地从因特网上的一个站点访问另一个站点，从而主动地按需获取丰富的信息  
> 超媒体和超文本  
>> 万维网是分布式超媒体（hypermedia）系统，它是超文本（hypertext）系统的扩充  
>> 一个超文本由多个信息源链接成。利用一个链接可使用户找到另一个文档。这些文档可以位于世界上任何一个接在因特网上的超文本系统中。超文本是万维网的基础  
>> 超媒体与超文本的区别是文档内容不同。超文本文档仅包含文本信息，而超媒体文档还包含其他表示方式的信息，如图形、图像、声音、动画，甚至活动视频图像  
> 
> 万维网的工作方式  
>> 万维网以客户/服务器方式工作(C/S)  
>> 浏览器——客户程序(B/S)：万维网文档所驻留的计算机则运行服务器程序，因此这个计算机也称为万维网服务器（Web服务器）  
>> 客户程序向服务器程序发出请求，服务器程序向客户程序送回客户所要的万维网文档  
>
> 统一资源定位符URL（Uniform Resource Locator）：标志分布在整个因特网上的文档  
>> URL是计算机系统资源标识的扩展  
>> URL的一般形式  
>>> 由以冒号隔开的两大部分组成，并且在URL中的字符对大小写不区分  
>>> 一般形式：<协议>://<主机>:<端口>/<路径>  
>>>> ftp——文件传送协议  
>>>> http——超文本传送协议  
>>>> News——USENET新闻  
>
> 超文本传送协议HTTP（HyperText Transfer Protocol）：实现万维网上各种超链的链接  
> 超文本标记语言HTML（HyperText Markup Language）：使各种文档能在各种计算机上显示出来  
>
>
>
>
>
>
