### IPv6——下一代互联网核心协议  
> 产生背景  
>> IPv4的问题：地址空间危机；性能变差；安全性差；手动配置地址；服务质量难保证  
>> 1994年IETF正式提议IPv6发展计划  
>> 1998年底被公布为互联网标准规范  
>
> IPv6地址  
>> 具体变化  
>>> 地址由32bit扩展为128bit  
>>> 由点分十进制变为冒号分16进制，4个一组  
>>> 每组开头的零可以省略，连续的全零组可以用双冒号表示，但只允许一次  
>>> 地址前缀长度用“\xx”表示  
>>
>> 地址分类  
>>> IPv6数据报的目的地址类型  
>>>> 单播地址  
>>>>> 格式前端为001：作为全球的单播地址  
>>>>> 特殊地址：
>>>>>> 未指定地址（128个0）： ::  
>>>>>> 回环地址： ::1  
>>>>>> 内嵌IPv4地址中的IPv6地址，前缀为 0000 0000 例 0:0:0:0:0:FFFF:10.153.70.200  
>>>>>> 链路本地地址LLA，用于本地链路寻址，自动地址配置和邻居发现。例 FE80::E0:F726:4E58/10  
>>>>>> 唯一本地（或站点本地）地址ULA，类似于局域网内部私有地址：FD00::/8（FEC0::/10）  
>>>>>
>>>>
>>>> 组播地址  
>>>> 任播地址  
>>>
>>
>> IPv6地址与IPv4地址的对照  
>>> ![image1](https://github.com/onshero/PCN/blob/picture/IPv4%E4%B8%8EIPv6%E7%9A%84%E5%9C%B0%E5%9D%80%E5%AF%B9%E7%85%A7.png)   
>> 
>> IPv6数据报的首部  
>>> 更简洁的报文头部   
>>> 首部长度变为固定的40字节，称为基本首部  
>>> 首部的字段减少到8个  
>>> 取消了首部的检验和字段  
>>> 在基本首部的后面允许有零个或多个扩展字段  
>>> 
>>> (1)基本首部  
>>>> ![image2](https://github.com/onshero/PCN/blob/picture/%E5%9F%BA%E6%9C%AC%E9%A6%96%E9%83%A8.png)  
>>>> 版本（version）——4位。它指明了协议的版本，对IPv6该字段总是6  
>>>> 通信量类（traffic class）——8位。是为了区分不同的IPv6数据报的类别或优先级  
>>>> 流标号（flow label）——20位。“流”是互联网络上从特定源点到特定终点的一系列数据报，所以属于同一个流的数据报都具有同样的流标号。“流”所经过的路径上的路由器都保证指明的服务质量  
>>>> 有效载荷长度（payload length）——16位。指明IPv6数据报除基本首部以外的字节数（所有扩展首部都算在有效载荷之内），最大值是64KB  
>>>> 下一个首部（next header）——8位。相当于IPv4的协议字段或可选字段  
>>>> 跳数限制（hop limit）——8位。源站在数据报发出时即设定跳数限制。路由器在转发数据报时将跳数限制字段中的值减1。当跳数限制的值为0时，就要将此数据报丢弃  
>>>> 源地址——128位。是数据报的发送站的IP地址  
>>>> 目的地址——128位。是数据报的接收站的IP地址  
>>>
>>> (2)扩展首部  
>>>> ![image3](https://github.com/onshero/PCN/blob/picture/%E6%89%A9%E5%B1%95%E9%A6%96%E9%83%A8.png)  
>>>
>>
>> IPv6地址分配  
>>> 将128位地址空间分为两大部分：类型前缀和地址的其他部分（长度均可变，总长128,其中类型前缀定义了地址的目的）  
>>> 全球单播地址的等级结构（三个等级）：  
>>>> （1）全球路由选择前缀，占48位  
>>>> （2）子网标识符，占16位  
>>>> （3）接口标识符，占64位  
>>>
>>> IPv6地址配置方法  
>>>> 手工配置  
>>>> 有状态地址自动配置(DHCPv6信息交互过程：地址申请）  
>>>>> 1.Client首先发送Solicit请求报文，定位DHCPv6服务器，报文的目的地址是特定的组播地址  
>>>>> 2.Server检查合法后，则回应Advertise报文  
>>>>> 3.如果Client收到多个Advertise，则根据优先级选择一个服务器，并发送Request请求  
>>>>> 4.Server回应Reply，申请地址交互过程结束  
>>>>
>>>> 无状态地址自动配置(IPv6无状态地址分配、邻居发现（NDP）协议、RS<->RA交互)  
>>>>> 1.IPv6主机根据本地接口ID自动产生链路本地（link-local）地址  
>>>>> 2.Link-local地址重复地址检测，如不重复，链路本地地址生效，节点具备IP连接能力  
>>>>>> 主机发送RS消息  
>>>>>> 路由器返回RA消息（携带分配的IPv6前缀信息，M=0）  
>>>>>> 主机根据路由器回应的RA消息，获得本链路前缀信息，由前缀+接口ID生成主机的全局地址或网点地址  
>>>>>> 再经过重复地址检测  
>>>>
>>>
>>
>> 相关协议的变化  
>>> IPv6、DHCPv6、ICMPv6、RIPng、OSPFv3、BGP4+、PPPoEv6...
>>
>> 从IPv4向IPv6过渡  
>>> 只能采用逐步演进的办法  
>>> 新安装的IPv6系统能够向后兼容  
>>> IPv6系统必须能够接收和转发IPv4分组，并且能够为IPv4分组选择路由器  
>>> 
>>> 过渡技术  
>>>> ![image4](https://github.com/onshero/PCN/blob/picture/%E8%BF%87%E6%B8%A1%E6%8A%80%E6%9C%AF.png)  
>>>> 双协议栈  
>>>>> 是指在完全过渡到IPv6之前，使一部分主机（或路由器）装有两个协议栈，IPv4和IPv6  
>>>>> 装有双协议栈的设备必须用于IPv4和IPv6两个地址  
>>>>> 通过DNS系统探测目的地，来决定使用哪个协议  
>>>>> 问题：双协议转换后，一些字段信息无法恢复  
>>>>> 双栈技术：同时与IPv6和IPv4互通；应用程序选择使用IPv6或IPv4协议；只适用双栈节点本身；每个双栈节点都要求至少一个IPv4地址  
>>>>> 优点：互通性好，实现简单，允许应用逐渐从IPv4过渡到IPv6  
>>>>> 缺点：对每个IPv4节点都要升级，成本较大，没有解决IPv4地址紧缺问题  
>>>>
>>>> 隧道  
>>>>> IPv6报文作为IPv4的载荷，或由MPLS（多协议标签交换）承载，在IPv4网络中连接多个IPv6孤岛  
>>>>> 优点：充分利用现有组网，将IPv4的隧道作为IPv6的虚拟链路；骨干网内部设备无须升级，充分利用现有组网；符合从边缘过渡的策略  
>>>>> 缺点：额外的隧道配置，降低效率，只能实现v6-v6设备互连  
>>>>
>>>> 转换  
>>>>> 通过IPv6与IPv4协议间转换，实现IPv4节点与IPv6节点间的互通。NAT-PT  
>>>>> 优点：能解决IPv4已有资源的共享问题和IPv4地址短缺的问题  
>>>>> 缺点：翻译技术会降低设备的处理能力和网络传送效率，易形成网络瓶颈  
>>>>
>>
>
### 移动互联网  
> 移动互联网就是将移动通信和互联网二者结合起来，成为一体的一种新型的网络  
> 移动互联网是指用户能够通过手机、PDA或其他手持终端，通过无线通信网络接入互联网  
> 移动的宽带化和宽带的移动化  
> 分类  
>> 卫星移动通信系统  
>> 无线局域网络系统  
>> 蜂窝移动通信系统  
>
> 1G实现模拟语音，传送电话；2G实现发送短信；3G实现多媒体业务传输；4G实现高质量多媒体业务传输  
> 5G：速度更快；范围更广；功耗更低；时延更小  
> 5G通信关键技术：高频段传输；新型多天线传输；同时同频全双工；设备到设备通信；密集网络覆盖技术；新型网络架构  
> 5G与4G的比较  
>> 容量：单位面积移动数据流量增长到1000倍左右  
>> 传输速率：典型用户数据速率增长10到100倍；理论上峰值的传输速率达到10G；端到端的数据传输时延缩短到一毫秒左右  
>> 可接入性：可联网设备的数量增加到10到100倍  
>> 可靠性：低功率MMC（机器型设备）的电池续航时间增加10倍  
>
